(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,n,t){e.exports=t.p+"static/media/chevron-left.439818dc.svg"},19:function(e,n,t){e.exports=t.p+"static/media/chevron-right.12852530.svg"},21:function(e,n,t){e.exports=t(40)},27:function(e,n,t){},38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(10),i=t.n(o),c=(t(27),t(1)),s=t(3),u=t.n(s),l=t(9),d=t(4),p=t(5),f=t(7),h=t(6),v=t(8),m=t(2),b=t(12),g=t.n(b),w={primaryColor:"#333",mealColors:{breakfast:"#F9CA24",lunch:"#4834D4",snack:"#6AB04C",dinner:"#EB4D4B"},lightMealColors:{breakfast:"#fce287",lunch:"#7b6ce0",snack:"#9bcb86",dinner:"#f28988"}},k=function(e){return e?w.mealColors[e]:"transparent"};function j(){var e=Object(c.a)(["\n  color: white;\n  background-image: linear-gradient(\n    -50deg,\n    white 40%,\n    "," 60%\n  );\n  background-position: 0 0;\n  background-size: 250% 250%;\n  transition: background-position 0.4s;\n  font-size: 1.8rem;\n  font-weight: 900;\n  border: 3px solid ",";\n  padding: 0.8rem 1.5rem;\n  border-radius: 2rem;\n  text-transform: uppercase;\n  text-align: center;\n\n  &.selected {\n    background-position: 100% 100%;\n    color: ",";\n  }\n"]);return j=function(){return e},e}function y(){var e=Object(c.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 1rem;\n  padding: 0 2rem;\n"]);return y=function(){return e},e}var O=["breakfast","lunch","snack","dinner"],x=function(e){function n(){return Object(d.a)(this,n),Object(f.a)(this,Object(h.a)(n).apply(this,arguments))}return Object(v.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){var e=this.props,n=e.selectedMeal,t=e.onMealChange;return a.a.createElement(C,null,O.map(function(e){return a.a.createElement(E,{key:e,onClick:function(){return t(e)},variant:e,className:n===e&&"selected"},e)}))}}]),n}(r.Component),C=m.a.div(y()),E=m.a.p(j(),function(e){return k(e.variant)},function(e){return k(e.variant)},function(e){return k(e.variant)}),D=x,M=t(18),P=t.n(M),A=t(19),B=t.n(A);function Y(){var e=Object(c.a)(["\n  flex: 2;\n  text-align: center;\n  white-space: nowrap;\n  align-self: center;\n  margin: 0 3rem;\n  font-size: 1.8rem;\n  font-weight: 900;\n  border: 3px solid #333;\n  padding: 0.8rem 1.5rem;\n  border-radius: 2rem;\n  text-transform: uppercase;\n  color: white;\n  background-image: linear-gradient(-50deg, #333 40%, white, #333 60%);\n  background-size: 300% 300%;\n"]);return Y=function(){return e},e}function S(){var e=Object(c.a)(["\n  flex: 1;\n"]);return S=function(){return e},e}function T(){var e=Object(c.a)(["\n  display: flex;\n"]);return T=function(){return e},e}var W=function(e){function n(){var e,t;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(f.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(a)))).handleIconClick=function(e){var n=document.getElementById("selectedDate");n.style.animation="",setTimeout(function(){n.style.animation="slideBackground .4s"},0),t.props.onDateChange(e)},t}return Object(v.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){var e=this,n=this.props.selectedDate;return a.a.createElement(z,null,a.a.createElement(I,{src:P.a,alt:"Move date back",onClick:function(){return e.handleIconClick(-1)}}),a.a.createElement(N,{id:"selectedDate"},n.calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"})),a.a.createElement(I,{src:B.a,alt:"Move date forward",onClick:function(){return e.handleIconClick(1)}}))}}]),n}(r.Component),z=m.a.div(T()),I=m.a.img(S()),N=m.a.p(Y()),U=W;function L(){var e=Object(c.a)(["\n  clip-path: polygon(100% 100%, 100% 0%, 0% 100%);\n\n  &.hidden {\n    transform: translate(50%, 50%);\n  }\n"]);return L=function(){return e},e}function R(){var e=Object(c.a)(["\n  clip-path: polygon(0 0, 102% 0, 0 102%);\n\n  &.hidden {\n    transform: translate(-50%, -50%);\n  }\n"]);return R=function(){return e},e}function J(){var e=Object(c.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  transition: transform 0.2s;\n  background-image: radial-gradient(\n    "," 20%,\n    ","\n  );\n"]);return J=function(){return e},e}function F(){var e=Object(c.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  border-radius: 100%;\n  background-image: radial-gradient(#333 20%, #555);\n  overflow: hidden;\n  backface-visibility: hidden;\n  // box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.4);\n"]);return F=function(){return e},e}var $=function(e){function n(){var e,t;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(f.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(a)))).handleClick=function(){var e=t.props,n=e.firstMeal,r=e.secondMeal,a=e.onClick;a(n&&r?0:n?2:1)},t}return Object(v.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){var e=this.props,n=e.firstMeal,t=e.secondMeal;return a.a.createElement(q,{onClick:this.handleClick},a.a.createElement(H,{className:!n&&"hidden",variant:n}),a.a.createElement(K,{className:!t&&"hidden",variant:t}))}}]),n}(r.Component),q=m.a.div(F()),G=m.a.div(J(),function(e){return k(e.variant)},function(e){return(n=e.variant)?w.lightMealColors[n]:"transparent";var n}),H=Object(m.a)(G)(R()),K=Object(m.a)(G)(L()),Q=$;function V(){var e=Object(c.a)(["\n  display: grid;\n  grid-template-columns: repeat(5, 6rem);\n  justify-content: center;\n  grid-auto-rows: 6rem;\n  grid-gap: 1rem;\n  max-height: calc(100vh - 38rem);\n  overflow: auto;\n  padding: 4px;\n"]);return V=function(){return e},e}var X=function(e){function n(){var e,t;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(f.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(a)))).handlePointClick=function(e){return function(n){t.props.onPointClick(e+n)}},t}return Object(v.a)(n,e),Object(p.a)(n,[{key:"render",value:function(){for(var e=this.props,n=e.points,t=e.minPoints,r=n.concat(new Array(2*Math.max(t,5*(Math.floor(n.length/10)+2))-n.length).fill(null)),o=[],i=0;i<r.length;i+=2)o.push(a.a.createElement(Q,{key:i,firstMeal:r[i],secondMeal:r[i+1],onClick:this.handlePointClick(i)}));return a.a.createElement(Z,null,o)}}]),n}(r.Component),Z=m.a.div(V()),_=X;function ee(){var e=Object(c.a)(["\n  text-align: center;\n  white-space: nowrap;\n  margin: auto;\n  width: 20rem;\n  font-size: 1.8rem;\n  font-weight: 900;\n  border: 3px solid #333;\n  padding: 0.8rem 1.5rem;\n  border-radius: 2rem;\n  text-transform: uppercase;\n  color: white;\n  background-image: linear-gradient(-50deg, #333 40%, white, #333 60%);\n  background-size: 300% 300%;\n"]);return ee=function(){return e},e}var ne,te=function(e){function n(){return Object(d.a)(this,n),Object(f.a)(this,Object(h.a)(n).apply(this,arguments))}return Object(v.a)(n,e),Object(p.a)(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.points.length!==e.points.length}},{key:"componentDidUpdate",value:function(){var e=document.getElementById("totalText");e.style.animation="",setTimeout(function(){e.style.animation="slideBackground .4s"},0)}},{key:"render",value:function(){var e=this.props.points;return a.a.createElement(re,{id:"totalText"},"Total ",e.length/2)}}]),n}(r.Component),re=m.a.p(ee()),ae=te,oe="pointseilijat",ie=1,ce="points";function se(){return ue.apply(this,arguments)}function ue(){return(ue=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.indexedDB){e.next=2;break}throw new Error("No IndexedDB");case 2:return e.abrupt("return",new Promise(function(e,n){var t=window.indexedDB.open(oe,ie);t.onsuccess=function(){console.log("db open"),e(t.result)},t.onerror=function(e){n(e.target.errorCode)},t.onupgradeneeded=function(e){console.log("onupgradeneeded");var n=e.currentTarget.result;n.objectStoreNames.contains(ce)||n.createObjectStore(ce,{keyPath:"date"})}}));case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function le(){return de.apply(this,arguments)}function de(){return(de=Object(l.a)(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.indexedDB){e.next=2;break}throw new Error("No IndexedDB");case 2:if(!ne){e.next=4;break}return e.abrupt("return",ne);case 4:return e.next=6,se();case 6:return n=e.sent,ne=n,e.abrupt("return",ne);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function pe(e,n){return fe.apply(this,arguments)}function fe(){return(fe=Object(l.a)(u.a.mark(function e(n,t){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:return r=e.sent,e.abrupt("return",new Promise(function(e,a){var o=r.transaction(ce,"readwrite");o.oncomplete=function(){e()},o.onerror=function(e){a(e.target.errorCode)};var i=o.objectStore(ce),c={date:n.format("YYYY-MM-DD"),points:t};i.put(c)}));case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function he(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(l.a)(u.a.mark(function e(n){var t,r,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:return t=e.sent,r=t.transaction(ce),a=r.objectStore(ce),e.abrupt("return",new Promise(function(e,t){var r=a.get(n.format("YYYY-MM-DD"));r.onsuccess=function(){var n=r.result;e(n?n.points:[])},r.onerror=function(e){t(e.target.errorCode)}}));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function me(){var e=Object(c.a)(["\n  padding: 2rem 1rem;\n\n  & > *:not(:last-child) {\n    margin-bottom: 2rem;\n  }\n"]);return me=function(){return e},e}var be=function(e){function n(){var e,t;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(f.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(a)))).state={selectedMeal:"breakfast",selectedDate:g()(),points:[]},t.handleMealChange=function(e){t.setState({selectedMeal:e})},t.handleDateChange=function(){var e=Object(l.a)(u.a.mark(function e(n){var r,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g()(t.state.selectedDate).add(n,"days"),e.prev=1,e.next=4,he(r);case 4:a=e.sent,t.setState({points:a||[],selectedDate:r}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Unable to retrieve points"),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(n){return e.apply(this,arguments)}}(),t.handlePointClick=function(){var e=Object(l.a)(u.a.mark(function e(n){var r,a,o,i,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,a=r.points,o=r.selectedMeal,i=r.selectedDate,c=a.slice(),n<a.length?c=a.slice(0,n):n>a.length&&(c=a.concat(new Array(n-a.length).fill(o))),e.prev=3,console.log("saving points"),e.next=7,pe(i,c);case 7:t.setState({points:c}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),alert("Unable to save points"),console.error(e.t0);case 14:case"end":return e.stop()}},e,this,[[3,10]])}));return function(n){return e.apply(this,arguments)}}(),t}return Object(v.a)(n,e),Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark(function e(){var n,t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.selectedDate,e.prev=1,e.next=4,he(n);case 4:t=e.sent,this.setState({points:t||[]}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert("Unable to retrieve points"),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,n=e.selectedMeal,t=e.selectedDate,r=e.points;return a.a.createElement(ge,null,a.a.createElement(U,{selectedDate:t,onDateChange:this.handleDateChange}),a.a.createElement(D,{selectedMeal:n,onMealChange:this.handleMealChange}),a.a.createElement(_,{points:r,minPoints:25,onPointClick:this.handlePointClick}),a.a.createElement(ae,{points:r}))}}]),n}(r.Component),ge=m.a.div(me()),we=be;t(38);function ke(){var e=Object(c.a)(["\n  font-size: 3rem;\n  text-align: center;\n"]);return ke=function(){return e},e}function je(){var e=Object(c.a)(["\n  max-width: 46rem;\n  margin: auto;\n  margin-top: 1rem;\n"]);return je=function(){return e},e}function ye(){var e=Object(c.a)(["\n  background: #333;\n  color: white;\n  text-align: center;\n  font-size: 2rem;\n  font-family: 'Passero One', sans-serif;\n  padding: 1rem;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.4);\n"]);return ye=function(){return e},e}var Oe=function(e){function n(){var e,t;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(f.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(a)))).state={openingDatabase:!0,databaseError:!1},t}return Object(v.a)(n,e),Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark(function e(){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.prev=1,e.next=4,se();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),n=!0;case 10:this.setState({openingDatabase:!1,databaseError:n});case 11:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,n=e.databaseError,t=e.openingDatabase;return a.a.createElement("div",null,a.a.createElement(xe,null,a.a.createElement("h1",null,"Pointseilijat")),a.a.createElement(Ce,null,t?a.a.createElement(Ee,null,"Loading..."):n?a.a.createElement(Ee,null,"This browser is not compatible with the app. Please try using Chrome."):a.a.createElement(we,null)))}}]),n}(r.Component),xe=m.a.header(ye()),Ce=m.a.div(je()),Ee=m.a.p(ke()),De=Oe,Me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pe(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(a.a.createElement(De,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pointseilijat",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("/pointseilijat","/service-worker.js");Me?(function(e,n){fetch(e).then(function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Pe(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Pe(n,e)})}}()}},[[21,2,1]]]);
//# sourceMappingURL=main.3ffb763a.chunk.js.map