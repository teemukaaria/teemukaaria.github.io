(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(n,e,t){n.exports=t.p+"static/media/chevron-left.439818dc.svg"},19:function(n,e,t){n.exports=t.p+"static/media/chevron-right.12852530.svg"},21:function(n,e,t){n.exports=t(40)},27:function(n,e,t){},38:function(n,e,t){},40:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(10),i=t.n(o),c=(t(27),t(1)),s=t(4),u=t(5),l=t(7),d=t(6),p=t(8),f=t(2),h=t(3),m=t.n(h),v=t(9),g=t(12),b=t.n(g),w={primaryColor:"#333",mealColors:{breakfast:"#F9CA24",lunch:"#4834D4",snack:"#6AB04C",dinner:"#EB4D4B"},lightMealColors:{breakfast:"#fce287",lunch:"#7b6ce0",snack:"#9bcb86",dinner:"#f28988"}},k=function(n){return n?w.mealColors[n]:"transparent"};function j(){var n=Object(c.a)(["\n  color: white;\n  background-image: linear-gradient(\n    -50deg,\n    white 40%,\n    "," 60%\n  );\n  background-position: 0 0;\n  background-size: 250% 250%;\n  transition: background-position 0.4s;\n  font-size: 1.8rem;\n  font-weight: 900;\n  border: 3px solid ",";\n  padding: 0.8rem 1.5rem;\n  border-radius: 2rem;\n  text-transform: uppercase;\n  text-align: center;\n\n  &.selected {\n    background-position: 100% 100%;\n    color: ",";\n  }\n"]);return j=function(){return n},n}function y(){var n=Object(c.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 1rem;\n  padding: 0 2rem;\n"]);return y=function(){return n},n}var O=["breakfast","lunch","snack","dinner"],x=function(n){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,n),Object(u.a)(e,[{key:"render",value:function(){var n=this.props,e=n.selectedMeal,t=n.onMealChange;return a.a.createElement(C,null,O.map(function(n){return a.a.createElement(D,{key:n,onClick:function(){return t(n)},variant:n,className:e===n&&"selected"},n)}))}}]),e}(r.Component),C=f.a.div(y()),D=f.a.p(j(),function(n){return k(n.variant)},function(n){return k(n.variant)},function(n){return k(n.variant)}),E=x,M=t(18),P=t.n(M),B=t(19),A=t.n(B);function Y(){var n=Object(c.a)(["\n  flex: 2;\n  text-align: center;\n  white-space: nowrap;\n  margin: 0 3rem;\n  font-size: 1.8rem;\n  font-weight: 900;\n  border: 3px solid #333;\n  padding: 0.8rem 1.5rem;\n  border-radius: 2rem;\n  text-transform: uppercase;\n  color: white;\n  background-image: linear-gradient(-50deg, #333 40%, white, #333 60%);\n  background-size: 300% 300%;\n"]);return Y=function(){return n},n}function S(){var n=Object(c.a)(["\n  flex: 1;\n"]);return S=function(){return n},n}function T(){var n=Object(c.a)(["\n  display: flex;\n"]);return T=function(){return n},n}var W=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(a)))).handleIconClick=function(n){var e=document.getElementById("selectedDate");e.style.animation="",setTimeout(function(){e.style.animation="slideBackground .4s"},0),t.props.onDateChange(n)},t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"render",value:function(){var n=this,e=this.props.selectedDate;return a.a.createElement(I,null,a.a.createElement(N,{src:P.a,alt:"Move date back",onClick:function(){return n.handleIconClick(-1)}}),a.a.createElement(U,{id:"selectedDate"},e.calendar(null,{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"})),a.a.createElement(N,{src:A.a,alt:"Move date forward",onClick:function(){return n.handleIconClick(1)}}))}}]),e}(r.Component),I=f.a.div(T()),N=f.a.img(S()),U=f.a.p(Y()),z=W;function L(){var n=Object(c.a)(["\n  clip-path: polygon(100% 100%, 100% 0%, 0% 100%);\n\n  &.hidden {\n    transform: translate(50%, 50%);\n  }\n"]);return L=function(){return n},n}function R(){var n=Object(c.a)(["\n  clip-path: polygon(0 0, 102% 0, 0 102%);\n\n  &.hidden {\n    transform: translate(-50%, -50%);\n  }\n"]);return R=function(){return n},n}function J(){var n=Object(c.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  transition: transform 0.2s;\n  background-image: radial-gradient(\n    "," 20%,\n    ","\n  );\n"]);return J=function(){return n},n}function F(){var n=Object(c.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  border-radius: 100%;\n  background-image: radial-gradient(#333 20%, #555);\n  overflow: hidden;\n  backface-visibility: hidden;\n  // box-shadow: 1px 2px 4px rgba(0, 0, 0, 0.4);\n"]);return F=function(){return n},n}var $=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(a)))).handleClick=function(){var n=t.props,e=n.firstMeal,r=n.secondMeal,a=n.onClick;a(e&&r?0:e?2:1)},t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"render",value:function(){var n=this.props,e=n.firstMeal,t=n.secondMeal;return a.a.createElement(q,{onClick:this.handleClick},a.a.createElement(H,{className:!e&&"hidden",variant:e}),a.a.createElement(K,{className:!t&&"hidden",variant:t}))}}]),e}(r.Component),q=f.a.div(F()),G=f.a.div(J(),function(n){return k(n.variant)},function(n){return(e=n.variant)?w.lightMealColors[e]:"transparent";var e}),H=Object(f.a)(G)(R()),K=Object(f.a)(G)(L()),Q=$;function V(){var n=Object(c.a)(["\n  display: grid;\n  grid-template-columns: repeat(5, 6rem);\n  justify-content: center;\n  grid-auto-rows: 6rem;\n  grid-gap: 1rem;\n  height: calc(100vh - 38rem);\n  overflow: auto;\n  padding: 4px;\n"]);return V=function(){return n},n}var X=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(a)))).handlePointClick=function(n){return function(e){t.props.onPointClick(n+e)}},t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"render",value:function(){for(var n=this.props,e=n.points,t=n.minPoints,r=e.concat(new Array(2*Math.max(t,5*(Math.floor(e.length/10)+2))-e.length).fill(null)),o=[],i=0;i<r.length;i+=2)o.push(a.a.createElement(Q,{key:i,firstMeal:r[i],secondMeal:r[i+1],onClick:this.handlePointClick(i)}));return a.a.createElement(Z,null,o)}}]),e}(r.Component),Z=f.a.div(V()),_=X;function nn(){var n=Object(c.a)(["\n  text-align: center;\n  white-space: nowrap;\n  margin: auto;\n  width: 20rem;\n  font-size: 1.8rem;\n  font-weight: 900;\n  border: 3px solid #333;\n  padding: 0.8rem 1.5rem;\n  border-radius: 2rem;\n  text-transform: uppercase;\n  color: white;\n  background-image: linear-gradient(-50deg, #333 40%, white, #333 60%);\n  background-size: 300% 300%;\n"]);return nn=function(){return n},n}var en,tn=function(n){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,n),Object(u.a)(e,[{key:"shouldComponentUpdate",value:function(n){return this.props.points.length!==n.points.length}},{key:"componentDidUpdate",value:function(){var n=document.getElementById("totalText");n.style.animation="",setTimeout(function(){n.style.animation="slideBackground .4s"},0)}},{key:"render",value:function(){var n=this.props.points;return a.a.createElement(rn,{id:"totalText"},"Total ",n.length/2)}}]),e}(r.Component),rn=f.a.p(nn()),an=tn,on="pointseilijat",cn=1,sn="points";function un(){return ln.apply(this,arguments)}function ln(){return(ln=Object(v.a)(m.a.mark(function n(){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(window.indexedDB){n.next=2;break}throw new Error("No IndexedDB");case 2:return n.abrupt("return",new Promise(function(n,e){var t=window.indexedDB.open(on,cn);t.onsuccess=function(){console.log("db open"),n(t.result)},t.onerror=function(n){e(n.target.errorCode)},t.onupgradeneeded=function(n){console.log("onupgradeneeded");var e=n.currentTarget.result;e.objectStoreNames.contains(sn)||e.createObjectStore(sn,{keyPath:"date"})}}));case 3:case"end":return n.stop()}},n,this)}))).apply(this,arguments)}function dn(){return pn.apply(this,arguments)}function pn(){return(pn=Object(v.a)(m.a.mark(function n(){var e;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(window.indexedDB){n.next=2;break}throw new Error("No IndexedDB");case 2:if(!en){n.next=4;break}return n.abrupt("return",en);case 4:return n.next=6,un();case 6:return e=n.sent,en=e,n.abrupt("return",en);case 9:case"end":return n.stop()}},n,this)}))).apply(this,arguments)}function fn(n,e){return hn.apply(this,arguments)}function hn(){return(hn=Object(v.a)(m.a.mark(function n(e,t){var r;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,dn();case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,a){var o=r.transaction(sn,"readwrite");o.oncomplete=function(){n()},o.onerror=function(n){a(n.target.errorCode)};var i=o.objectStore(sn),c={date:e.format("YYYY-MM-DD"),points:t};i.put(c)}));case 4:case"end":return n.stop()}},n,this)}))).apply(this,arguments)}function mn(n){return vn.apply(this,arguments)}function vn(){return(vn=Object(v.a)(m.a.mark(function n(e){var t,r,a;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,dn();case 2:return t=n.sent,r=t.transaction(sn),a=r.objectStore(sn),n.abrupt("return",new Promise(function(n,t){var r=a.get(e.format("YYYY-MM-DD"));r.onsuccess=function(){var e=r.result;n(e?e.points:[])},r.onerror=function(n){t(n.target.errorCode)}}));case 6:case"end":return n.stop()}},n,this)}))).apply(this,arguments)}function gn(){var n=Object(c.a)(["\n  padding: 2rem 1rem;\n\n  & > *:not(:last-child) {\n    margin-bottom: 2rem;\n  }\n"]);return gn=function(){return n},n}var bn=function(n){function e(){var n,t;Object(s.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(l.a)(this,(n=Object(d.a)(e)).call.apply(n,[this].concat(a)))).state={selectedMeal:"breakfast",selectedDate:b()(),points:[]},t.handleMealChange=function(n){t.setState({selectedMeal:n})},t.handleDateChange=function(){var n=Object(v.a)(m.a.mark(function n(e){var r,a;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=b()(t.state.selectedDate).add(e,"days"),n.prev=1,n.next=4,mn(r);case 4:a=n.sent,t.setState({points:a||[],selectedDate:r}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),alert("Unable to retrieve points"),console.error(n.t0);case 12:case"end":return n.stop()}},n,this,[[1,8]])}));return function(e){return n.apply(this,arguments)}}(),t.handlePointClick=function(){var n=Object(v.a)(m.a.mark(function n(e){var r,a,o,i,c;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.state,a=r.points,o=r.selectedMeal,i=r.selectedDate,c=a.slice(),e<a.length?c=a.slice(0,e):e>a.length&&(c=a.concat(new Array(e-a.length).fill(o))),n.prev=3,console.log("saving points"),n.next=7,fn(i,c);case 7:t.setState({points:c}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(3),alert("Unable to save points"),console.error(n.t0);case 14:case"end":return n.stop()}},n,this,[[3,10]])}));return function(e){return n.apply(this,arguments)}}(),t}return Object(p.a)(e,n),Object(u.a)(e,[{key:"componentDidMount",value:function(){var n=Object(v.a)(m.a.mark(function n(){var e,t;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.state.selectedDate,n.prev=1,n.next=4,mn(e);case 4:t=n.sent,this.setState({points:t||[]}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),alert("Unable to retrieve points"),console.error(n.t0);case 12:case"end":return n.stop()}},n,this,[[1,8]])}));return function(){return n.apply(this,arguments)}}()},{key:"render",value:function(){var n=this.state,e=n.selectedMeal,t=n.selectedDate,r=n.points;return a.a.createElement(wn,null,a.a.createElement(z,{selectedDate:t,onDateChange:this.handleDateChange}),a.a.createElement(E,{selectedMeal:e,onMealChange:this.handleMealChange}),a.a.createElement(_,{points:r,minPoints:25,onPointClick:this.handlePointClick}),a.a.createElement(an,{points:r}))}}]),e}(r.Component),wn=f.a.div(gn()),kn=bn;t(38);function jn(){var n=Object(c.a)(["\n  max-width: 46rem;\n  margin: auto;\n  margin-top: 1rem;\n"]);return jn=function(){return n},n}function yn(){var n=Object(c.a)(["\n  background: #333;\n  color: white;\n  text-align: center;\n  font-size: 2rem;\n  font-family: 'Passero One', sans-serif;\n  padding: 1rem;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.4);\n"]);return yn=function(){return n},n}var On=function(n){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,n),Object(u.a)(e,[{key:"componentDidMount",value:function(){un()}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(xn,null,a.a.createElement("h1",null,"Pointseilijat")),a.a.createElement(Cn,null,a.a.createElement(kn,null)))}}]),e}(r.Component),xn=f.a.header(yn()),Cn=f.a.div(jn()),Dn=On,En=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Mn(n,e){navigator.serviceWorker.register(n).then(function(n){n.onupdatefound=function(){var t=n.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}}).catch(function(n){console.error("Error during service worker registration:",n)})}i.a.render(a.a.createElement(Dn,null),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("/pointseilijat",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/pointseilijat","/service-worker.js");En?(function(n,e){fetch(n).then(function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(n){n.unregister().then(function(){window.location.reload()})}):Mn(n,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,n),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Mn(e,n)})}}()}},[[21,2,1]]]);
//# sourceMappingURL=main.d7b1adbd.chunk.js.map